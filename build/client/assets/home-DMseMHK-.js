import{w as x}from"./with-props-Dm20DvoO.js";import{r as l,l as e}from"./chunk-KNED5TY2-_0w-D9js.js";import{l as m,H as p,F as f}from"./footer-bP2yV9_R.js";function j(){const s=l.useRef(null),[a,i]=l.useState([]),[o,t]=l.useState(null);l.useEffect(()=>{fetch("http://localhost:3001/audios").then(r=>r.json()).then(r=>i(r))},[]);const d=(r,n)=>{!s.current||!s.current.src.includes(encodeURI(r))?(s.current&&(s.current.pause(),s.current.currentTime=0,s.current.onended=null),s.current=new Audio(r),s.current.onended=()=>{n+1<a.length?d(a[n+1],n+1):t(null)},s.current.play(),t(r)):s.current.paused?(s.current.play(),t(r)):(s.current.pause(),t(null))};return e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Audios guardados"}),e.jsx("ul",{className:"space-y-2",children:a.map((r,n)=>e.jsxs("li",{className:"flex items-center justify-between border p-2 rounded",children:[e.jsx("span",{children:r.split("/").pop()}),e.jsx("button",{onClick:()=>d(r,n),className:"px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:o===r?"â¸ï¸ Pausar":"â–¶ï¸ Reproducir"})]},n))})]})}function b(s){const[a,i]=l.useState(""),o=async t=>{try{const r=await(await fetch("http://localhost:3001/api/descargar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:t})})).json();console.log(r)}catch(d){console.error("Error:",d)}};return[e.jsxs("div",{className:"flex w-1/1 h-1/2 border-2",children:[e.jsx("div",{className:"w-1/3",children:e.jsx("img",{src:m,className:"w-1/1"})}),s?e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:s.user}),e.jsx("span",{children:s.mail})]}):e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:"Name"}),e.jsx("span",{children:"E-mail"})]})]}),e.jsxs("div",{className:"flex flex-col w-1/1 h-1/2 border-2",children:[e.jsx("input",{className:"border-2 bg-fuchsia-300 w-1/1 h-1/2",value:a,onChange:t=>i(t.target.value)}),e.jsx("button",{className:"border-2 bg-amber-300 w-1/1 h-1/2 cursor-pointer",onClick:()=>o(a),children:"download"})]})]}const g=({onRecordingComplete:s})=>{const[a,i]=l.useState(!1),o=l.useRef(null),t=l.useRef([]),d=async()=>{const n=await navigator.mediaDevices.getUserMedia({audio:!0}),c=new MediaRecorder(n);c.ondataavailable=u=>{t.current.push(u.data)},c.onstop=()=>{const u=new Blob(t.current,{type:"audio/webm"}),h=URL.createObjectURL(u);t.current=[],s&&s(u,h)},o.current=c,c.start(),i(!0)},r=()=>{var n;(n=o.current)==null||n.stop(),i(!1)};return e.jsx("div",{className:"flex gap-4 items-center",children:a?e.jsx("button",{onClick:r,children:"â¹ï¸ Detener"}):e.jsx("button",{onClick:d,className:"hover:cursor-pointer hover:border-2",children:"ðŸŽ™ï¸ Empezar"})})};function w(s){const[a,i]=l.useState(null),[o,t]=l.useState(null),d=async(c,u)=>{i(u),t(c)},r=()=>{a&&new Audio(a).play()},n=async()=>{try{const c=new FormData;c.append("audio",o,"grabacion.mp3");const h=await(await fetch("http://localhost:3001/api/upload",{method:"POST",body:c})).json();console.log("Archivo guardado en:",h.url)}catch(c){console.error("Error:",c)}};return e.jsxs("div",{className:"flex items-center w-1/1 h-1/1 border-2 flex-col",children:[e.jsxs("div",{className:"flex h-1/8 justify-between  w-1/1",children:[e.jsx("img",{src:m,className:"h-1/1"}),s?e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{className:"text-sm",children:s.user})}):e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{className:"text-sm",children:"Name"})})]}),e.jsx(g,{onRecordingComplete:d}),a&&e.jsx("button",{onClick:r,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"ðŸ”Š Escuchar grabaciÃ³n"}),a&&e.jsx("button",{onClick:n,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"ðŸ”Š Subir grabacion"}),e.jsx("iframe",{className:"w-9/10",src:"http://www.youtube.com/embed/JcRcTRedS_8"})]})}const N=()=>{const[s,a]=l.useState(null);return l.useEffect(()=>{(async()=>{try{const o=await fetch("http://localhost:3001/api/user_data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:"mister"})});a(await o.json())}catch(o){console.error("Error:",o)}})()},[]),e.jsxs("main",{className:"flex justify-center pt-4 pb-4 h-4/5",children:[e.jsx("section",{className:"w-1/3",children:e.jsx(b,{user:s?s.user:"Cargando",mail:s?s.mail:"Cargando"})}),e.jsx("section",{className:"w-2/5",children:e.jsx(w,{user:s?s.user:"Cargando"})}),e.jsx("section",{className:"w-1/3",children:e.jsx(j,{})})]})};function C({}){return[{title:"ChazaRadio"}]}const S=x(function(){return[e.jsx(p,{nav:["Login","Exit"]}),e.jsx(N,{}),e.jsx(f,{})]});export{S as default,C as meta};
