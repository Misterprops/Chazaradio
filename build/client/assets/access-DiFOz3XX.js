import{w as x}from"./with-props-Dm20DvoO.js";import{r as l,p,l as e,q as u,t as m}from"./chunk-KNED5TY2-_0w-D9js.js";import{H as g,F as j}from"./footer-bP2yV9_R.js";const f=()=>{const[s,a]=l.useState(""),[o,i]=l.useState(""),n=p(),c=async(r,d)=>{try{const t=await fetch("http://localhost:3000/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:r,password:d})}),h=await t.json();console.log(h),t.ok?n("/"):t.status===400?alert("Contraseña erronea"):alert(t.status)}catch(t){console.error("Error:",t)}};return e.jsxs("div",{className:"flex flex-col w-1/1 h-1/1",children:[e.jsx("h1",{className:"h-1/10 font-bold",children:"Login"}),e.jsxs("form",{className:"flex flex-col h-4/5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"user",children:"Usuario"}),e.jsx("input",{type:"text",id:"user",value:s,onChange:r=>a(r.target.value),className:"bg-white"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",children:"Contraseña"}),e.jsx("input",{type:"text",id:"password",value:o,onChange:r=>i(r.target.value),className:"bg-white"})]}),e.jsx("button",{onClick:r=>{r.preventDefault(),c(s,o)},className:"border-2",children:"Login"})]}),e.jsx("button",{className:"h-1/10",children:e.jsx(u,{to:"../Login",state:{tipo:!0},children:"Registrarse"})})]})},b=async s=>{alert("registra: "+s.user+"-"+s.password+"-"+s.mail);try{const a=await fetch("http://localhost:3000/api/registro",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s.mail,password:s.password,user:s.user})})}catch(a){console.error("Error:",a)}},v=async s=>{try{const a=await fetch("http://localhost:3000/api/verificar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s.mail,codigo:s.code})});alert(a)}catch(a){console.error("Error:",a)}},w=()=>{const[s,a]=l.useState(""),[o,i]=l.useState(""),[n,c]=l.useState(""),[r,d]=l.useState("");return e.jsxs("div",{className:"flex flex-col w-1/1 h-1/1",children:[e.jsx("h1",{className:"h-1/10 font-bold",children:"Register"}),e.jsxs("form",{className:"flex flex-col h-4/5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"user",children:"Usuario"}),e.jsx("input",{type:"text",id:"user",value:s,onChange:t=>a(t.target.value),className:"bg-white"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",children:"Contraseña"}),e.jsx("input",{type:"text",id:"password",value:o,onChange:t=>i(t.target.value),className:"bg-white"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"mail",children:"Correo"}),e.jsx("input",{type:"text",id:"mail",value:n,onChange:t=>c(t.target.value),className:"bg-white"})]}),e.jsx("button",{onClick:t=>{t.preventDefault(),b({user:s,password:o,mail:n})},className:"border-2",children:"Registrar"})]}),e.jsxs("form",{children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"code",children:"Codigo"}),e.jsx("input",{type:"text",id:"code",value:r,onChange:t=>d(t.target.value),className:"bg-white"})]}),e.jsx("button",{onClick:t=>{t.preventDefault(),v({code:r,mail:n})},className:"border-2",children:"Registrar"})]}),e.jsx("button",{className:"h-1/10",children:e.jsx(u,{to:"../Login",state:{tipo:!1},children:"Login"})})]})},y=()=>{let s;const a=m();try{s=a.state.tipo}catch{s=!1}return e.jsx("main",{className:"flex justify-center pt-4 pb-4 h-4/5 bg-amber-100",children:s?e.jsx(w,{}):e.jsx(f,{})})};function L({}){return[{title:"Inicio de sesion"}]}const F=x(function({loaderData:a}){return[e.jsx(g,{nav:["/","Exit"]}),e.jsx(y,{}),e.jsx(j,{})]});export{F as default,L as meta};
